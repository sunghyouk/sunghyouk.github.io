---
title:  "R을 이용한 데이터 처리 & 분석 실무 - 서민구 지음"
excerpt: "R 실용서를 보며 R 정리하기 - 3장 R 프로그래밍"

categories: R

tags: [Programming, R]

date: 2022-01-02
last_modified_at: 2022-01-02

toc: true
toc_sticky: true

---

## 01. R의 특징

* 벡터 연산을 더 자주 사용  
* 결측치: 관측 또는 기록되지 않은 데이터를 표시하기 위한 NA가 있음  
* 객체의 불변성: 대부분의 R 객체는 그 값을 수정할 수 없음

## 02. 흐름 제어 (조건문과 반복문)

### if

```R
if (cond) {
    cond가 참일 때 실행할 문장
} else {
    cond가 거짓일 때 실행할 문장
}
```

다수의 TRUE, FALSE 값의 처리에 ifelse()를 고려할 수 있다.

```R
ifelse(
    test, # 참, 거짓을 저장한 객체
    yes, # test가 참일 때 선택한 값
    no # test가 거짓일 때 선택한 값
)
```

### 반복문

```R
#for
for (i in data) {
    i를 사용한 문장
}

#while
while (cond) {
    조건이 참일 때 수행할 문장
}

#repeat
repeat {
    반복해서 수행할 문장
}
```

`break`: 반복문을 종료  
`next`: 현재 수행 중인 반복문 블록의 수행을 중단, 다음 반복을 시작

## 03. 연산

### 수치 연산

각 숫자를 개별적으로 연산하는 것이 아니라 벡터에 통째로 연산자를 적용하고 있음  
벡터, 행렬의 연산  

### 벡터 연산

벡터 연산 또는 array programming은 벡터 또는 리스트를 한 번에 연산하는 것을 말한다.  
벡터 간 연사 시 `&`를 사용함.  
기본적으로 벡터 기반 연산을 지원 - 벡터를 곧바로 인자로 받을 수 있다.  
*example)* function: sum(), mean(), median(), ifelse()도 그렇다.  

데이터 프레임에 진리값을 지정해 특정 행을 얻어올 수 있다.  
*example* code  

```R
d <- data.frame(x=c(1, 2, 3, 4, 5), y=c("a", "b", "c", "d", "e")) # data frame 만들기

d[d$x %% 2 == 0, ] # x가 짝수인 경우의 행만 선택
```

### NA의 처리

`na.rm`: NA 값이 있을 때 해당 값을 연산에서 제외할 것인지를 지정하는 데 사용  
NA를 어떻게 처리할 지를 `na.action`이라는 함수 인자로 받았다면, 데이터 프레임에 `na.action`을 실행해 현재 처리 중인 데이터를 사용자가 원하는 대로 정제할 수 있다.  
*example* na.fail(), na.omit(), na.exclude(), na.pass()  

## 04. 함수의 정의

### 기본 정의

```R
function_name <- function(arg1, arg2, ...) {
    함수 본문
    return(반환 값) # 반환 값이 없다면 생략
}
```

### 가변 길이 인자

`...`은 개수를 알 수 없는 임의의 인자를 표현하는 데 사용, 내부에서 호출하는 다른 함수에 넘겨줄 인자를 표시하는 데도 사용한다.  

### 중첩 함수

함수 안에 또 다른 함수를 정의하여 사용  
함수 안에서 반복되는 동작을 한 함수로 만들고 이를 호출하여 코드를 간결하게 표현  
내부 함수가 외부 함수에 정의된 변수를 접근할 수 있어 closure로 사용할 수 있다.  

## 05. 스코프

코드에 기술한 이름 (예를 들면, 변수명)이 어디에서 사용 가능한지를 정하는 규칙  
문법적 스코프 (정적 스코프)를 사용  
콘솔에서 변수를 선언하면 모든 곳에서 사용가능한 전역 변수가 된다.  
source()를 사용해 실행할 경우 다른 파일에서도 해당 변수를 사용할 수 있다.  
함수 내부의 지역 변수가 우선한다.  

`rm`: 지정한 환경에서 객체를 삭제  
`ls`: 객체를 나열한다.  

```R
rm(
    ..., # 삭제할 객체의 목록
    list=character(), # 삭제할 객체를 나열한 벡터
    envir=as.environment(pos) # 객체를 삭제할 환경
)

ls(
    name, # 객체를 나열할 환경의 이름
    envir # name 대신 직접 환경을 지정할 경우 사용
)

# therefore
rm(list=ls()) # 메모리에 있는 모든 객체를 삭제하라!
```

함수 내부에 정의한 이름은 함수 바깥에서 접근할 수 없다.  
함수 내에서 이름은 함수 아느이 변수들로부터 먼저 찾는다. 중첩 함수에도 같은 규칙이 적용된다.  

내부 블록에서 외부 블록에 선언된 값을 수정하고자 할 때, 값이 할당되는 대상이 내부 블록으로 간주되기 때문에 조심해야 한다.  
만약 중첩 함수에서 외부 함수의 변수 또는 전역 변수에 값을 할당하려면 `<<-`을 사용해야 한다.  

## 06. 값에 의한 전달

